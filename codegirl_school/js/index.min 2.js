function hidePrice() { $.get("https://freegeoip.app/json/", function (e) { "BY" === e.country_code && ($(".priceUa").remove(), $(".priceBy").removeClass("d-none")), "UA" === e.country_code && ($(".priceBy").remove(), $(".priceUa").removeClass("d-none")) }, "jsonp") } function flowingScroll(e) { e.preventDefault(); const t = $(this), o = t.attr("href"); console.log(t), $(o).length && $("html").animate({ scrollTop: $(o).offset().top - $(".header").height() }, 1e3) } function formValidationOnBlur() { const e = $(this).attr("name"); if ("name" === e) $(this).toggleClass("invalid", 0 === $(this).val().length); else if ("email" === e) { const e = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/; $(this).toggleClass("invalid", !e.test($(this).val())) } } function formValidationOnSubmit(e) { return $(e.target).find(".form__validation input").each(function () { 0 === $(this).val().length && $(this).addClass("invalid") }), !$(e.target).find(".invalid").length } function formRequest(e) { if (e.preventDefault(), !formValidationOnSubmit(e)) return !1; const t = $(this), o = t.find("#name").val(), n = t.find("#phone").val(), i = t.find("#email").val(), a = $("input:radio[name ='contactChoice']:checked").val(); $requestWrapper = $(".request"), resultClass = "request--done", $errorMessage = $(".request__form-error-message"), TOKEN = "690262192:AAFPK980L5YbeiukbB3SmGXueAv6y7dZ-ZQ", CHAT_ID = "-235528261", message = "*NEW STUDENT*\n\n\nName: " + o + "\nPhone: " + n + "\nEmail: " + i + "\nContact via: " + a, $.ajax({ type: "POST", url: "https://api.telegram.org/bot" + TOKEN + "/sendMessage", data: { chat_id: CHAT_ID, parse_mode: "HTML", text: message }, success: function () { $requestWrapper.addClass(resultClass) }, error: function () { $errorMessage.removeClass("d-none") } }) } function scrollToNavItem(e) { e.preventDefault(); const t = $(this).attr("href"); console.log($(t)), $(t).length && $("html").animate({ scrollTop: $(t).offset().top - $(".header").height() - 20 }, 500) } function carouselEvent(e) { var t = event.originalEvent.touches[0].pageX; $(this).one("touchmove", function (e) { var o = e.originalEvent.touches[0].pageX; Math.floor(t - o) > 5 ? $(this).carousel("next") : Math.floor(t - o) < -5 && $(this).carousel("prev") }), $(".carousel").on("touchend", function () { $(this).off("touchmove") }) } function checkBlock() { const e = $(".header"), t = $(".nav-link"), o = t.map(function () { let e = $($(this).attr("href")); if (e.length) return e }); let n, i = $(this).scrollTop() + e.height() + 70, a = o.map(function () { if ($(this).offset().top < i) return this }), r = (a = a[a.length - 1]) && a.length ? a[0].id : ""; n !== r && (n = r, t.removeClass("active"), e.find("[href='#" + r + "']").addClass("active")) } $(document).ready(function () { hidePrice(), $("#carouselReviews .carousel-item").matchHeight(), $(".price__item").matchHeight(), $(".btn--flowing-scroll").on("click", flowingScroll), $(".request__form").submit(formRequest), $(".form__validation input").on("blur", formValidationOnBlur), $(".nav-link").on("click", scrollToNavItem), $(".carousel").on("touchstart", function (e) { var t = e.originalEvent.touches[0].pageX; $(this).one("touchmove", function (e) { var o = e.originalEvent.touches[0].pageX; Math.floor(t - o) > 5 ? $(this).carousel("next") : Math.floor(t - o) < -5 && $(this).carousel("prev") }), $(".carousel").on("touchend", function () { $(this).off("touchmove") }) }) }), $(window).scroll(function () { const e = $(".header"), t = $(window).scrollTop(); e.toggleClass("header--fixed", t >= e.height()), checkBlock() }), $(window).on("resize", function () { $(function () { $("#carouselReviews .carousel-item").matchHeight() }), $(function () { $(".price__item").matchHeight() }) });